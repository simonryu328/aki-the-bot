<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport"
    content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
  <meta name="description" content="Aki â€” Your personal reflection journal">
  <title>Aki â€” Journal</title>

  <!-- Telegram Mini App SDK -->
  <script src="https://telegram.org/js/telegram-web-app.js?59"></script>

  <!-- Google Fonts: Inter -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">

  <!-- Canvas Confetti -->
  <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
</head>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<!-- SPLASH SCREEN (Initial Load)                -->
<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<div class="splash-screen" id="splashScreen">
  <div class="splash-content">
    <div class="splash-logo">âœ¨</div>
    <div class="splash-spinner"></div>
  </div>
</div>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<!-- WELCOME OVERLAY (first-time users)          -->
<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<div class="welcome-overlay hidden" id="welcomeOverlay">
  <div class="welcome-slides" id="welcomeSlides">

    <!-- Slide 1: Welcome -->
    <div class="welcome-slide" data-slide="0">
      <div class="welcome-slide-content">
        <div class="welcome-emoji">âœ¨</div>
        <h1 class="welcome-title">Welcome to Aki</h1>
        <p class="welcome-text">Your personal AI companion â€” here to listen, remember, and grow with you.
        </p>
        <div class="welcome-hint">Swipe to continue â†’</div>
      </div>
    </div>

    <!-- Slide 2: Name Input -->
    <div class="welcome-slide" data-slide="1">
      <div class="welcome-slide-content">
        <div class="welcome-emoji">ğŸ‘‹</div>
        <h1 class="welcome-title">What's your name?</h1>
        <p class="welcome-text">What should Aki call you?</p>
        <div class="welcome-name-input-group">
          <input type="text" class="welcome-name-input" id="welcomeNameInput" placeholder="Your name" maxlength="30"
            autocomplete="off" />
        </div>
        <button class="welcome-continue-btn" id="welcomeNameContinue" disabled>
          Continue
        </button>
      </div>
    </div>

    <!-- Slide 3: Tutorial -->
    <div class="welcome-slide" data-slide="2">
      <div class="welcome-slide-content">
        <div class="welcome-emoji">ğŸ“–</div>
        <h1 class="welcome-title">Your Dashboard</h1>
        <div class="welcome-panels-preview">
          <div class="welcome-panel-card">
            <div class="welcome-panel-header">
              <div class="welcome-panel-icon">ğŸ“”</div>
              <div class="welcome-panel-label">Journal</div>
            </div>
            <div class="welcome-panel-desc">Aki's reflections on your conversations</div>
          </div>
          <div class="welcome-panel-card active">
            <div class="welcome-panel-header">
              <div class="welcome-panel-icon">ğŸ•</div>
              <div class="welcome-panel-label">Today</div>
            </div>
            <div class="welcome-panel-desc">Daily messages and your schedule</div>
          </div>
          <div class="welcome-panel-card">
            <div class="welcome-panel-header">
              <div class="welcome-panel-icon">ğŸŒ…</div>
              <div class="welcome-panel-label">Horizons</div>
            </div>
            <div class="welcome-panel-desc">Your plans and aspirations</div>
          </div>
        </div>
        <p class="welcome-text">Swipe left and right to navigate between panels.</p>
      </div>
    </div>

    <!-- Slide 4: All Set -->
    <div class="welcome-slide" data-slide="3">
      <div class="welcome-slide-content">
        <div class="welcome-emoji">ğŸ‰</div>
        <h1 class="welcome-title">You're All Set!</h1>
        <div class="welcome-timezone-info" id="welcomeTimezoneInfo">
          <div class="welcome-tz-label">Your timezone</div>
          <div class="welcome-tz-value" id="welcomeTzValue">Detecting...</div>
          <div class="welcome-tz-time" id="welcomeTzTime"></div>
        </div>
        <button class="welcome-finish-btn" id="welcomeFinishBtn">
          <span>Get Started</span>
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5"
            stroke-linecap="round" stroke-linejoin="round">
            <polyline points="9 18 15 12 9 6" />
          </svg>
        </button>
      </div>
    </div>

  </div>

  <!-- Welcome Dots -->
  <div class="welcome-dots" id="welcomeDots">
    <span class="welcome-dot active" data-slide="0"></span>
    <span class="welcome-dot" data-slide="1"></span>
    <span class="welcome-dot" data-slide="2"></span>
    <span class="welcome-dot" data-slide="3"></span>
  </div>
</div>

<!-- Navigation Tabs -->
<nav class="nav-tabs" id="navTabs">
  <button class="nav-tab" data-panel="0">
    <svg class="nav-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
      stroke-linejoin="round">
      <path d="M4 19.5A2.5 2.5 0 0 1 6.5 17H20" />
      <path d="M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z" />
    </svg>
    <span>Journal</span>
  </button>
  <button class="nav-tab active" data-panel="1">
    <svg class="nav-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
      stroke-linejoin="round">
      <circle cx="12" cy="12" r="10" />
      <polyline points="12 6 12 12 16 14" />
    </svg>
    <span>Today</span>
  </button>
  <button class="nav-tab" data-panel="2">
    <svg class="nav-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
      stroke-linejoin="round">
      <path d="M12 2L2 7l10 5 10-5-10-5zM2 17l10 5 10-5M2 12l10 5 10-5" />
    </svg>
    <span>Horizons</span>
  </button>
</nav>

<!-- Panel Container -->
<main class="panels-container" id="panelsContainer">

  <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
  <!-- PANEL 1: Journal (Past)                     -->
  <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
  <section class="panel" id="panelJournal">
    <div class="panel-content">
      <h1 class="panel-title">Journal</h1>
      <p class="panel-subtitle">Aki's reflections</p>


      <!-- Empty State -->
      <div class="empty-state hidden" id="emptyState">
        <p class="empty-text">No entries yet.</p>
        <p class="empty-hint">Start a conversation with Aki to create memories.</p>
      </div>

      <!-- Journal Cards List -->
      <div class="journal-list" id="journalList">
        <!-- Cards rendered by JS -->
      </div>

      <!-- Search Bar -->
      <div class="search-bar hidden" id="searchBar">
        <svg class="search-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
          stroke-linecap="round" stroke-linejoin="round">
          <circle cx="11" cy="11" r="8" />
          <line x1="21" y1="21" x2="16.65" y2="16.65" />
        </svg>
        <input type="text" class="search-input" placeholder="Search entries..." id="searchInput"
          aria-label="Search journal entries">
      </div>
    </div>
  </section>

  <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
  <!-- PANEL 2: Today (Coming Soon)                -->
  <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
  <section class="panel" id="panelToday">
    <div class="panel-content">
      <h1 class="panel-title">Today</h1>
      <p class="panel-subtitle" id="todayDate"></p>

      <div class="daily-message-container" id="dailyMessageContainer">
        <div class="daily-card loading" id="dailyCard">
          <div class="daily-quote-icon">âœ¨</div>
          <div class="daily-quote-text" id="dailyQuoteText">Generating your daily message...</div>
          <div class="daily-quote-footer" id="dailyQuoteFooter">Aki â€¢ Today</div>
        </div>
      </div>

      <!-- Spotify Daily Soundtrack -->
      <div id="soundtrackContainer" class="soundtrack-container hidden">
        <h2 class="section-heading">Your Daily Soundtrack</h2>

        <!-- Loading State -->
        <div id="soundtrackLoading" class="soundtrack-card loading">
          <div class="soundtrack-spinner"></div>
          <p>Aki is picking a song for you...</p>
        </div>

        <!-- Connect Spotify State -->
        <div id="soundtrackConnect" class="soundtrack-card connect hidden">
          <div class="spotify-logo">
            <svg viewBox="0 0 24 24" fill="currentColor">
              <path
                d="M12 0C5.373 0 0 5.373 0 12s5.373 12 12 12 12-5.373 12-12S18.627 0 12 0zm5.49 17.306c-.215.353-.675.463-1.025.247-2.868-1.753-6.48-2.15-10.732-1.177-.4.092-.8-.158-.89-.558-.092-.4.158-.8.558-.89 4.654-1.064 8.64-.61 11.84 1.345.353.216.463.676.248 1.025zm1.465-3.264c-.27.44-.847.58-1.287.31-3.282-2.016-8.286-2.597-12.164-1.42-.495.15-1.02-.13-1.17-.625-.15-.495.13-1.02.625-1.17 4.434-1.343 9.94-.684 13.702 1.623.44.27.58.847.31 1.287zm.126-3.414C15.24 8.356 8.85 8.144 5.122 9.276c-.59.18-1.21-.154-1.39-.745-.18-.59.154-1.21.745-1.39C8.79 5.86 15.863 6.103 20.088 8.61c.53.315.706 1.004.39 1.534-.314.53-1.003.706-1.534.39l-.126-.11z" />
            </svg>
          </div>
          <h3>Connect Spotify</h3>
          <p>Let Aki pick the perfect soundtrack for your day based on your taste.</p>
          <button id="connectSpotifyBtn" class="connect-spotify-btn">Connect</button>
        </div>

        <!-- Track Card -->
        <div id="soundtrackCard" class="soundtrack-card hidden">
          <div class="track-info-row">
            <div class="track-artwork">
              <img id="trackArt" src="" alt="Album Art">
            </div>
            <div class="track-details">
              <div id="trackVibe" class="track-vibe"></div>
              <div id="trackName" class="track-name"></div>
              <div id="trackArtist" class="track-artist"></div>
            </div>
          </div>
          <div id="trackExplanation" class="track-explanation"></div>
          <div class="track-actions">
            <a id="playSpotifyBtn" href="#" target="_blank" class="play-spotify-btn">
              <span class="btn-icon">â–¶</span> Play on Spotify
            </a>
            <button id="disconnectSpotifyBtn" class="disconnect-link">Disconnect Spotify</button>
          </div>
        </div>
      </div>

      <!-- Personalized Insights Section -->
      <div id="personalizedInsights" class="insights-container hidden">
        <h2 class="section-heading">Personalized for You</h2>

        <!-- Vibe & Top Topic Stats -->
        <div class="stats-row">
          <div class="stat-card vibe">
            <div class="stat-label">Current Vibe</div>
            <div class="stat-value" id="statVibe">...</div>
            <div class="stat-desc" id="statVibeDesc"></div>
          </div>
          <div class="stat-card topic">
            <div class="stat-label">Obsession</div>
            <div class="stat-value" id="statTopic">...</div>
            <div class="stat-desc" id="statTopicDesc"></div>
          </div>
        </div>

        <!-- Unhinged Quotes -->
        <div class="insight-group unhinged">
          <div class="group-header">
            <span class="group-icon">ğŸ”¥</span>
            <span class="group-title">Iconic Things You've Said</span>
          </div>
          <div id="unhingedList" class="insight-list">
            <!-- Rendered by JS -->
          </div>
        </div>

        <!-- Aki's Observations -->
        <div class="insight-group observations">
          <div class="group-header">
            <span class="group-icon">ğŸ‘ï¸</span>
            <span class="group-title">Aki's Observations</span>
          </div>
          <div id="observationsList" class="insight-list">
            <!-- Rendered by JS -->
          </div>
        </div>

        <!-- Fun Questions -->
        <div class="insight-group questions">
          <div class="group-header">
            <span class="group-icon">ğŸ’¬</span>
            <span class="group-title">Ask me these...</span>
          </div>
          <div id="questionsList" class="questions-grid">
            <!-- Rendered by JS -->
          </div>
        </div>
      </div>

      <div class="coming-soon" id="todayComingSoon">
        <div class="coming-soon-icon">ğŸŒ…</div>
        <p class="coming-soon-text">Your daily dashboard is coming soon.</p>
        <p class="coming-soon-hint">Quotes, schedule, and intentions â€” all in one place.</p>
      </div>
    </div>
  </section>

  <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
  <!-- PANEL 3: Horizons (Future)                  -->
  <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
  <section class="panel" id="panelHorizons">
    <div class="panel-content">
      <h1 class="panel-title">Horizons</h1>
      <p class="panel-subtitle">Future and hopes</p>

      <div class="horizons-container" id="horizonsList">
        <div class="coming-soon">
          <div class="coming-soon-icon">ğŸŒ…</div>
          <p class="coming-soon-text">Your horizons are expanding.</p>
          <p class="coming-soon-hint">This is where Aki holds your plans, goals, and the things you're looking forward
            to.</p>
        </div>
      </div>
    </div>
  </section>

</main>

<!-- Dot Indicators -->
<div class="dot-indicators" id="dotIndicators">
  <span class="dot" data-panel="0"></span>
  <span class="dot active" data-panel="1"></span>
  <span class="dot" data-panel="2"></span>
</div>



<!-- Reflection Overlay (Modal Reveal) -->
<div id="reflectionOverlay" class="reflection-overlay">
  <button id="reflectionCloseBtn" class="reflection-close-btn" aria-label="Close">
    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5"
      stroke-linecap="round" stroke-linejoin="round">
      <line x1="18" y1="6" x2="6" y2="18"></line>
      <line x1="6" y1="6" x2="18" y2="18"></line>
    </svg>
  </button>
  <div class="reflection-card">
    <div class="reflection-emoji">ğŸ“”</div>
    <h2 id="reflectionTitle" class="reflection-title">Recent Reflection</h2>
    <div class="reflection-peek-container">
      <p id="reflectionPeek" class="reflection-peek">Aki just wrote something about your latest conversation...</p>
    </div>
    <button id="reflectionBtn" class="reflection-btn">Witness Moment</button>
  </div>
</div>

<script type="module" src="/src/main.ts"></script>
</body>

</html>